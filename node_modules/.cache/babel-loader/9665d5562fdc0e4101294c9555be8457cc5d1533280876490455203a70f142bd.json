{"ast":null,"code":"import _slicedToArray from\"/Users/dongwookang/Documents/internship/aes-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import mapboxgl from'mapbox-gl';import React,{useState,useEffect,useRef}from'react';import{ThemeProvider}from'@material-ui/core/styles';import Hidden from'@material-ui/core/Hidden';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import IconButton from'@material-ui/core/Button';import{ContactsOutlined,Home}from'@material-ui/icons';import LogoOverlay from'./LogoOverlay';import Omnibox from'./Omnibox';import SettingsPane from'./SettingsPane';import{getAllCategories}from'./common';import CONFIG from'./config.json';import{fetchMapData}from'./data-loader';import{THEME}from'./Theme';import insightLogo from'./img/insight-white.png';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var COMPANIES_SOURCE='companies';var MAPS=CONFIG['maps'];var POINT_LAYER='energy-companies-point-layer';// mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_TOKEN;\nmapboxgl.accessToken='pk.eyJ1IjoidG90b3JvLWRha2UiLCJhIjoiY2tiNzJuZmQ3MDFudDJxa2N1ZG91YzBzciJ9.5qJpYzti2W7avnuM9rCiKA';/** @return {html code for the popup } */function getPopupContent(props){var categoryInfo=['tax1','tax2','tax3'].map(function(k){return props[k];}).filter(function(s){return s;}).join(\", \");var extraNotes=\"\";if(props.hasOwnProperty(\"notes\")&&props[\"notes\"]!==\"\"){extraNotes=\"Focus: <span>\".concat(props['notes'],\"</span><br />\");}return\"\\n    <div class=\\\"popup\\\" style = \\\"color: 626262\\\">\\n      <h3 class=\\\"company-name\\\">\\n        <a href=\".concat(props['website'],\" class=\\\"popup-link\\\" target=\\\"blank\\\">\").concat(props['company'],\"</a>\\n      </h3>\\n      Sector(s): <span class=\\\"category-info\\\">\").concat(categoryInfo,\"</span><br />\\n      City: <span class=\\\"city-info\\\">\").concat(props['city'],\"</span><br />\\n      \").concat(extraNotes,\"\\n    </div>\");}function clearPopups(){// Check if there is already a popup on the map and if so, remove it\n// This prevents multiple popups in the case of overlapping circles\nvar popUps=document.getElementsByClassName('mapboxgl-popup');if(popUps[0])popUps[0].remove();}function displayPopup(map,feature){// clears the open popup and creates the new one \nvar coordinates=feature.geometry.coordinates.slice();clearPopups();new mapboxgl.Popup({}).setLngLat(coordinates).setHTML(getPopupContent(feature.properties)).setMaxWidth(\"600px\").addTo(map);}//79ddf2 - color for hover\nfunction populateMapData(map,mapId,mapData){// adds the data to the map\n// sets correct initial view of the map\nmap.setCenter(MAPS[mapId].center);map.setZoom(6);mapData.then(function(data){if(!map.getSource(COMPANIES_SOURCE)){map.addSource(COMPANIES_SOURCE,{type:'geojson',data:data['geojson']});}// Last entry is fallthrough color\nvar circleColors=data['taxonomy'].map(function(c){return[c.name,c.color];}).flat().concat(['#ccc']);map.addLayer({id:POINT_LAYER,type:'circle',source:COMPANIES_SOURCE,interactive:true,paint:{// make circles larger as the user zooms\n'circle-radius':{stops:[[7,5],[14,12],[20,50]]},'circle-opacity':0.85,// color circles by primary category\n'circle-color':['match',['get','tax1']].concat(circleColors),'circle-stroke-color':'#000','circle-stroke-width':0.4}});map.on('mouseenter',POINT_LAYER,function(e){map.getCanvas().style.cursor='pointer';});map.on('mouseleave',POINT_LAYER,function(){map.getCanvas().style.cursor='';});map.on('click',POINT_LAYER,function(e){return displayPopup(map,e.features[0]);});map.flyTo({center:MAPS[mapId].flyTo,zoom:MAPS[mapId].flyToZoom||8,speed:0.5});});}var getUrlFragment=function getUrlFragment(){return window.location.hash.replace('#','');};function useUrlFragment(fragment,callback){useEffect(function(){window.location.hash='#'+fragment;var handleHashChange=function handleHashChange(){callback(getUrlFragment());};window.addEventListener('hashchange',handleHashChange);return function(){window.removeEventListener('hashchange',handleHashChange);};});}/** @return {mapId} */function getInitialMapId(){var initialMapId=getUrlFragment();if(MAPS.hasOwnProperty(initialMapId)){return initialMapId;}return CONFIG['defaultMapId'];}// sets the styles for the material-ui components\nvar useStyles=makeStyles(function(theme){return{root:{display:'flex',flexDirection:'row'},mainContent:{flexGrow:1,position:'relative'},mapContainer:{height:'100vh',top:0,right:0,left:0,bottom:0,backgroundColor:'#333'},mapOverlay:{position:'absolute',top:0,left:0,right:0,bottom:0,padding:0,pointerEvents:'none'},mapOverlayInner:{display:'block',position:'relative',height:'100%',width:'100%',margin:0,padding:0},mainControlOverlay:{position:'absolute',top:0,left:0,padding:0,margin:0,pointerEvents:'auto',display:'flex',flexDirection:'row'},mainControlOverlayShifted:{position:'absolute',top:0,left:0,padding:0,margin:0,pointerEvents:'auto',display:'flex',flexDirection:'row',marginLeft:320},insightLogoContainer:{padding:8,marginTop:23,marginLeft:8},titleAndSearch:{padding:'4px 8px'},mapTitle:{color:'#fff',padding:'4px 0px',marginBottom:4},resetViewButton:{position:'absolute',bottom:73,right:4.5,minWidth:30,maxWidth:30,height:31}};});/** @return {html code for the app } */export default function App(){var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),thisMap=_useState2[0],setThisMap=_useState2[1];var _useState3=useState(getInitialMapId()),_useState4=_slicedToArray(_useState3,2),selectedMapId=_useState4[0],setSelectedMapId=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),taxonomy=_useState6[0],setTaxonomy=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),companiesGeojson=_useState8[0],setCompaniesGeojson=_useState8[1];var _useState9=useState(new Set([])),_useState10=_slicedToArray(_useState9,2),selectedCategories=_useState10[0],setSelectedCategories=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),mobileDrawerOpen=_useState12[0],setMobileDrawerOpen=_useState12[1];function handleToggleCategory(e){// called when categories are individually changed\nvar s=new Set(selectedCategories);if(s.has(e.target.name)){s.delete(e.target.name);}else{s.add(e.target.name);}setSelectedCategories(s);}function handleSelectAllCategories(txnomy){// takes argument instead of using taxonomy directly because taxonomy\n// state update can lag behind\nsetSelectedCategories(getAllCategories(txnomy));}function handleDeselectAllCategories(){setSelectedCategories(new Set());}function handleSelectCompany(e){// called when you select from the search bar\nvar selectedCompany=companiesGeojson.features[e.idx];displayPopup(thisMap,selectedCompany);thisMap.flyTo({center:selectedCompany.geometry.coordinates,zoom:14});}function handleSelectMap(mapId){if(mapId!==selectedMapId){clearPopups();console.log(\"thisMap: \");console.log(thisMap);if(thisMap.getLayer(POINT_LAYER)){thisMap.removeLayer(POINT_LAYER);}if(thisMap.getSource(COMPANIES_SOURCE)){thisMap.removeSource(COMPANIES_SOURCE);}setSelectedMapId(mapId);setMobileDrawerOpen(false);var mapData=fetchMapData(mapId);mapData.then(setUpMap);populateMapData(thisMap,mapId,mapData);handleSelectAllCategories(taxonomy);}}function handleShift(){// called when you open the mobile drawer\nif(!mobileDrawerOpen){return classes.mainControlOverlay;}else{return classes.mainControlOverlayShifted;}}function handleReset(){// called when reset button is clicked\nthisMap.flyTo({center:MAPS[selectedMapId].flyTo,zoom:MAPS[selectedMapId].flyToZoom||8});}function setUpMap(data){// changes the data in the map\nsetTaxonomy(data['taxonomy']);setCompaniesGeojson(data['geojson']);// initially select all categories\nhandleSelectAllCategories(data['taxonomy']);}//added Jun 28\nfunction getDistance(coord1,coord2){var x=coord1[0]-coord2[0];var y=coord1[1]-coord2[1];return Math.sqrt(x*x+y*y);}//added Jun 28\nfunction getClosestRegion(clickedCoordinates,MAPS){var closestRegionId=null;var minDistance=Infinity;Object.keys(MAPS).forEach(function(mapId){var distance=getDistance(clickedCoordinates,MAPS[mapId].center);if(distance<minDistance){minDistance=distance;closestRegionId=mapId;}});// console.log(\"closest id: \")\n// console.log(closestRegionId)\nreturn closestRegionId;}function convert_name_url(mapID){if(mapID==\"chicago\")return\"chicago\";else if(mapID==\"des-moines\")return\"des-moines\";else if(mapID==\"indianapolis\")return\"indianpolis\";else if(mapID==\"kansas-city\")return\"kansas-city\";else if(mapID==\"madison\")return\"madison\";else if(mapID==\"milwaukee\")return\"milwaukee\";else if(mapID==\"msp\")return\"minneapolisst-paul\";else if(mapID==\"pittsburgh\")return\"pittsburgh\";else if(mapID==\"silicon-valley\")return\"silicon-valley\";else if(mapID==\"st-louis\")return\"st-louis\";else if(mapID==\"denmark\")return\"denmark\";else if(mapID==\"kenya\")return\"kenya\";else if(mapID==\"rwanda\")return\"rwanda\";else if(mapID==\"netherlands\")return\"the-netherlands\";else if(mapID==\"philippines\")return\"the-philippines\";}//added Jun 28\nfunction initMap(){// creates the map\nvar map=new mapboxgl.Map({container:\"map-container\",style:'mapbox://styles/mapbox/dark-v10',attributionControl:false,center:MAPS[selectedMapId].center,zoom:MAPS[selectedMapId].flyToZoom||6,minZoom:2});var mapData=fetchMapData(selectedMapId);mapData.then(setUpMap);map.on('load',function(){map.addControl(new mapboxgl.FullscreenControl(),'bottom-right');map.addControl(new mapboxgl.NavigationControl(),'bottom-right');populateMapData(map,selectedMapId,mapData);});map.on('load',function(){// Add an image to use as a custom marker\nmap.loadImage('https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',function(error,image){if(error)throw error;map.addImage('custom-marker',image);// Add a GeoJSON source with 2 points\nmap.addSource('points',{'type':'geojson','data':{'type':'FeatureCollection','features':[{// feature for Mapbox DC\n'type':'Feature','geometry':{'type':'Point','coordinates':[-122.21,37.65]},'properties':{'title':'Silicon Valley'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-88.5,41.1]},'properties':{'title':'Chicago'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-93.2,44.9]},'properties':{'title':'Minneapolis/St. Paul'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-87.9,43.0]},'properties':{'title':'Milwaukee'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-86.15,39.8]},'properties':{'title':'Indianapolis'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-89.39,43.07]},'properties':{'title':'Madison'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-90.2,38.63]},'properties':{'title':'St. Louis'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-93.6,41.6]},'properties':{'title':'Des Moines'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-94.6,39.1]},'properties':{'title':'Kansas City'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[-80.0,40.4]},'properties':{'title':'Pittsburgh'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[121,14.58]},'properties':{'title':'Philippines'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[10.5,56.3]},'properties':{'title':'Denmark'}},{// feature for Mapbox SF\n'type':'Feature','geometry':{'type':'Point','coordinates':[36,0]},'properties':{'title':'Kenya'}}]}});// Add a symbol layer\nmap.addLayer({'id':'points','type':'symbol','source':'points','layout':{'icon-image':'custom-marker',// get the title name from the source's \"title\" property\n'text-field':['get','title'],'text-font':['Open Sans Semibold','Arial Unicode MS Bold'],'text-offset':[0,1.25],'text-anchor':'top','icon-size':0.7,// Adjust the size of the icon\n'icon-allow-overlap':true,// Allow icons to overlap\n'icon-ignore-placement':true},'paint':{'text-color':'#ffffff'// Color set to white\n}});});});//added June 28\nsetThisMap(map);//map.on('click', mapClickHandlerRef.current);\n}var mapClickHandlerRef=useRef(null);useEffect(function(){if(!thisMap){initMap();}if(thisMap){var handleMapClick=function handleMapClick(e){// Get clicked point's coordinates\nvar clickedCoordinates=[e.lngLat.lng,e.lngLat.lat];// You need a function 'getClosestRegion' that would return the ID of the closest region to the clicked point\nvar closestRegionId=getClosestRegion(clickedCoordinates,MAPS);var name=convert_name_url(closestRegionId);window.open(\"http://www.energysociety.org/ecosystem-\".concat(name),'_blank');// Call 'handleSelectMap' with the obtained region ID\nhandleSelectMap(closestRegionId);};// Remove previous click event listener\nif(mapClickHandlerRef.current){thisMap.off('click',mapClickHandlerRef.current);}// Attach click event\nthisMap.on('click',handleMapClick);// Update the ref after defining the function\nmapClickHandlerRef.current=handleMapClick;if(thisMap.getLayer(POINT_LAYER)){var filters=[\"any\"];// If ANY of the 3 taxonomies for a company are selected, it should be\n// displayed on the map.\n[1,2,3].forEach(function(i){var filter=[\"in\",\"tax\".concat(i,\"sanitized\")];selectedCategories.forEach(function(category){return filter.push(category);});filters.push(filter);});thisMap.setFilter(POINT_LAYER,filters);}}},[thisMap,selectedCategories]);// The dependencies array\nuseUrlFragment(selectedMapId,function(urlFragment){if(MAPS.hasOwnProperty(urlFragment)){handleSelectMap(urlFragment);}});return/*#__PURE__*/_jsx(ThemeProvider,{theme:THEME,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(SettingsPane,{selectedMapId:selectedMapId,mobileDrawerOpen:mobileDrawerOpen,selectedCategories:selectedCategories,onToggleOpen:setMobileDrawerOpen,onSelectMap:handleSelectMap,taxonomy:taxonomy,onSelectAllCategories:function onSelectAllCategories(){return handleSelectAllCategories(taxonomy);},onDeselectAllCategories:handleDeselectAllCategories,onToggleCategory:handleToggleCategory}),/*#__PURE__*/_jsxs(\"main\",{className:classes.mainContent,children:[/*#__PURE__*/_jsx(\"div\",{id:\"map-container\",className:classes.mapContainer}),/*#__PURE__*/_jsx(LogoOverlay,{selectedMapId:selectedMapId}),/*#__PURE__*/_jsx(\"div\",{className:classes.resetViewButton,children:/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",color:\"white\",className:classes.resetViewButton,\"aria-label\":\"reset view\",onClick:function onClick(){handleReset();},children:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.mapOverlay,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.mapOverlayInner,children:[/*#__PURE__*/_jsx(\"div\",{className:handleShift(),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.titleAndSearch,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.mapTitle,children:/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:MAPS[selectedMapId].title})}),/*#__PURE__*/_jsx(Omnibox,{companies:companiesGeojson.features,onSelectCompany:handleSelectCompany,onOpenMobileDrawer:function onOpenMobileDrawer(){return setMobileDrawerOpen(true);}})]})}),/*#__PURE__*/_jsx(LogoOverlay,{selectedMapId:selectedMapId})]})})]})]})});}","map":{"version":3,"names":["mapboxgl","React","useState","useEffect","useRef","ThemeProvider","Hidden","Typography","makeStyles","IconButton","ContactsOutlined","Home","LogoOverlay","Omnibox","SettingsPane","getAllCategories","CONFIG","fetchMapData","THEME","insightLogo","jsx","_jsx","jsxs","_jsxs","COMPANIES_SOURCE","MAPS","POINT_LAYER","accessToken","getPopupContent","props","categoryInfo","map","k","filter","s","join","extraNotes","hasOwnProperty","concat","clearPopups","popUps","document","getElementsByClassName","remove","displayPopup","feature","coordinates","geometry","slice","Popup","setLngLat","setHTML","properties","setMaxWidth","addTo","populateMapData","mapId","mapData","setCenter","center","setZoom","then","data","getSource","addSource","type","circleColors","c","name","color","flat","addLayer","id","source","interactive","paint","stops","on","e","getCanvas","style","cursor","features","flyTo","zoom","flyToZoom","speed","getUrlFragment","window","location","hash","replace","useUrlFragment","fragment","callback","handleHashChange","addEventListener","removeEventListener","getInitialMapId","initialMapId","useStyles","theme","root","display","flexDirection","mainContent","flexGrow","position","mapContainer","height","top","right","left","bottom","backgroundColor","mapOverlay","padding","pointerEvents","mapOverlayInner","width","margin","mainControlOverlay","mainControlOverlayShifted","marginLeft","insightLogoContainer","marginTop","titleAndSearch","mapTitle","marginBottom","resetViewButton","minWidth","maxWidth","App","classes","_useState","_useState2","_slicedToArray","thisMap","setThisMap","_useState3","_useState4","selectedMapId","setSelectedMapId","_useState5","_useState6","taxonomy","setTaxonomy","_useState7","_useState8","companiesGeojson","setCompaniesGeojson","_useState9","Set","_useState10","selectedCategories","setSelectedCategories","_useState11","_useState12","mobileDrawerOpen","setMobileDrawerOpen","handleToggleCategory","has","target","delete","add","handleSelectAllCategories","txnomy","handleDeselectAllCategories","handleSelectCompany","selectedCompany","idx","handleSelectMap","console","log","getLayer","removeLayer","removeSource","setUpMap","handleShift","handleReset","getDistance","coord1","coord2","x","y","Math","sqrt","getClosestRegion","clickedCoordinates","closestRegionId","minDistance","Infinity","Object","keys","forEach","distance","convert_name_url","mapID","initMap","Map","container","attributionControl","minZoom","addControl","FullscreenControl","NavigationControl","loadImage","error","image","addImage","mapClickHandlerRef","handleMapClick","lngLat","lng","lat","open","current","off","filters","i","category","push","setFilter","urlFragment","children","className","onToggleOpen","onSelectMap","onSelectAllCategories","onDeselectAllCategories","onToggleCategory","variant","onClick","title","companies","onSelectCompany","onOpenMobileDrawer"],"sources":["/Users/dongwookang/Documents/internship/aes-test/src/App.js"],"sourcesContent":["import mapboxgl from 'mapbox-gl';\nimport React, { useState, useEffect, useRef} from 'react';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Hidden from '@material-ui/core/Hidden';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/Button';\nimport { ContactsOutlined, Home } from '@material-ui/icons';\nimport LogoOverlay from './LogoOverlay';\nimport Omnibox from './Omnibox';\nimport SettingsPane from './SettingsPane';\nimport { getAllCategories } from './common';\nimport CONFIG from './config.json';\nimport { fetchMapData } from './data-loader';\nimport { THEME } from './Theme';\nimport insightLogo from './img/insight-white.png';\nimport './App.css';\n\nconst COMPANIES_SOURCE = 'companies';\nconst MAPS = CONFIG['maps'];\nconst POINT_LAYER = 'energy-companies-point-layer';\n\n// mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_TOKEN;\nmapboxgl.accessToken='pk.eyJ1IjoidG90b3JvLWRha2UiLCJhIjoiY2tiNzJuZmQ3MDFudDJxa2N1ZG91YzBzciJ9.5qJpYzti2W7avnuM9rCiKA'\n\n/** @return {html code for the popup } */\nfunction getPopupContent(props) {\n  const categoryInfo = ['tax1', 'tax2', 'tax3']\n    .map(k => props[k])\n    .filter(s => s).join(\", \");\n  var extraNotes = \"\";\n  if (props.hasOwnProperty(\"notes\") && props[\"notes\"] !== \"\") {\n    extraNotes = `Focus: <span>${props['notes']}</span><br />`;\n  }\n  return `\n    <div class=\"popup\" style = \"color: 626262\">\n      <h3 class=\"company-name\">\n        <a href=${props['website']} class=\"popup-link\" target=\"blank\">${props['company']}</a>\n      </h3>\n      Sector(s): <span class=\"category-info\">${categoryInfo}</span><br />\n      City: <span class=\"city-info\">${props['city']}</span><br />\n      ${extraNotes}\n    </div>`;\n}\n\nfunction clearPopups() {\n  // Check if there is already a popup on the map and if so, remove it\n  // This prevents multiple popups in the case of overlapping circles\n  var popUps = document.getElementsByClassName('mapboxgl-popup');\n  if (popUps[0]) popUps[0].remove();\n}\n\nfunction displayPopup(map, feature) {\n  // clears the open popup and creates the new one \n  const coordinates = feature.geometry.coordinates.slice();\n  clearPopups();\n  new mapboxgl.Popup({})\n    .setLngLat(coordinates)\n    .setHTML(getPopupContent(feature.properties))\n    .setMaxWidth(\"600px\")\n    .addTo(map);\n}\n//79ddf2 - color for hover\n\nfunction populateMapData(map, mapId, mapData) {\n  // adds the data to the map\n  // sets correct initial view of the map\n  \n  map.setCenter(MAPS[mapId].center);\n  map.setZoom(6);\n\n  mapData.then(data => {\n    if (!map.getSource(COMPANIES_SOURCE)) {\n    map.addSource(COMPANIES_SOURCE, {\n      type: 'geojson',\n      data: data['geojson'],\n    });\n  }\n\n\n    // Last entry is fallthrough color\n    let circleColors =\n      data['taxonomy'].map(c => [c.name, c.color]).flat().concat(['#ccc']);\n\n    map.addLayer({\n      id: POINT_LAYER,\n      type: 'circle',\n      source: COMPANIES_SOURCE,\n      interactive: true,\n      paint: {\n        // make circles larger as the user zooms\n        'circle-radius': {\n          stops: [[7, 5], [14, 12], [20, 50]]\n        },\n        'circle-opacity': 0.85,\n        // color circles by primary category\n        'circle-color': ['match', ['get', 'tax1']].concat(circleColors),\n        'circle-stroke-color': '#000',\n        'circle-stroke-width': 0.4,\n      }\n    });\n\n    map.on('mouseenter', POINT_LAYER, (e) => {\n      map.getCanvas().style.cursor = 'pointer';\n    });\n\n    map.on('mouseleave', POINT_LAYER, () => {\n      map.getCanvas().style.cursor = '';\n    });\n\n    map.on('click', POINT_LAYER, e => displayPopup(map, e.features[0]));\n\n    map.flyTo({\n      center: MAPS[mapId].flyTo,\n      zoom: MAPS[mapId].flyToZoom || 8,\n      speed: 0.5,\n    });\n  });\n}\n\nconst getUrlFragment = () => window.location.hash.replace('#', '');\n\nfunction useUrlFragment(fragment, callback) {\n  useEffect(() => {\n    window.location.hash = '#' + fragment;\n    const handleHashChange = () => {\n      callback(getUrlFragment());\n    }\n    window.addEventListener('hashchange', handleHashChange);\n    return () => {\n      window.removeEventListener('hashchange', handleHashChange);\n    }\n  });\n}\n\n/** @return {mapId} */\nfunction getInitialMapId() {\n  let initialMapId = getUrlFragment();\n  if (MAPS.hasOwnProperty(initialMapId)) {\n    return initialMapId;\n  }\n  return CONFIG['defaultMapId'];\n}\n\n// sets the styles for the material-ui components\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  mainContent: {\n    flexGrow: 1,\n    position: 'relative',\n  },\n  mapContainer: {\n    height: '100vh',\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    backgroundColor: '#333',\n  },\n  mapOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 0,\n    pointerEvents: 'none',\n  },\n  mapOverlayInner: {\n    display: 'block',\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n    margin: 0,\n    padding: 0,\n  },\n  mainControlOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    padding: 0,\n    margin: 0,\n    pointerEvents: 'auto',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  mainControlOverlayShifted: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    padding: 0,\n    margin: 0,\n    pointerEvents: 'auto',\n    display: 'flex',\n    flexDirection: 'row',\n    marginLeft: 320,\n  },\n  insightLogoContainer: {\n    padding: 8,\n    marginTop: 23,\n    marginLeft: 8,\n  },\n  titleAndSearch: {\n    padding: '4px 8px',\n  },\n  mapTitle: {\n    color: '#fff',\n    padding: '4px 0px',\n    marginBottom: 4,\n  },\n  resetViewButton: {\n    position: 'absolute',\n    bottom: 73,\n    right: 4.5,\n    minWidth: 30,\n    maxWidth: 30,\n    height: 31,\n  }\n}));\n\n/** @return {html code for the app } */\nexport default function App() {\n  const classes = useStyles();\n\n  const [thisMap, setThisMap] = useState(null);\n  const [selectedMapId, setSelectedMapId] = useState(getInitialMapId());\n  const [taxonomy, setTaxonomy] = useState([]);\n  const [companiesGeojson, setCompaniesGeojson] = useState({});\n  const [selectedCategories, setSelectedCategories] = useState(new Set([]));\n  const [mobileDrawerOpen, setMobileDrawerOpen] = useState(false);\n\n\n  function handleToggleCategory(e) {\n    // called when categories are individually changed\n    var s = new Set(selectedCategories);\n    if (s.has(e.target.name)) {\n      s.delete(e.target.name);\n    } else {\n      s.add(e.target.name);\n    }\n    setSelectedCategories(s);\n  }\n\n  function handleSelectAllCategories(txnomy) {\n    // takes argument instead of using taxonomy directly because taxonomy\n    // state update can lag behind\n    setSelectedCategories(getAllCategories(txnomy));\n  }\n\n  function handleDeselectAllCategories() {\n    setSelectedCategories(new Set());\n  }\n\n  function handleSelectCompany(e) {\n    // called when you select from the search bar\n    const selectedCompany = companiesGeojson.features[e.idx];\n    displayPopup(thisMap, selectedCompany);\n    thisMap.flyTo({\n      center: selectedCompany.geometry.coordinates,\n      zoom: 14,\n    });\n  }\n\n  function handleSelectMap(mapId) {\n    if (mapId !== selectedMapId) {\n      clearPopups();\n      \n      console.log(\"thisMap: \")\n      console.log(thisMap)\n      if (thisMap.getLayer(POINT_LAYER)){\n        thisMap.removeLayer(POINT_LAYER);\n      }\n      if (thisMap.getSource(COMPANIES_SOURCE)){\n        thisMap.removeSource(COMPANIES_SOURCE);\n      }\n      setSelectedMapId(mapId);\n      setMobileDrawerOpen(false);\n      let mapData = fetchMapData(mapId);\n      mapData.then(setUpMap);\n      populateMapData(thisMap, mapId, mapData);\n      handleSelectAllCategories(taxonomy);\n    }\n  }\n  \n\n  function handleShift() {\n    // called when you open the mobile drawer\n    if (!mobileDrawerOpen) {\n      return classes.mainControlOverlay;\n    } else {\n      return classes.mainControlOverlayShifted;\n    }\n  }\n\n  function handleReset() {\n    // called when reset button is clicked\n    thisMap.flyTo({\n      center: MAPS[selectedMapId].flyTo,\n      zoom: MAPS[selectedMapId].flyToZoom || 8,\n    });\n  }\n\n  function setUpMap(data) {\n    // changes the data in the map\n    setTaxonomy(data['taxonomy']);\n    setCompaniesGeojson(data['geojson']);\n    // initially select all categories\n    handleSelectAllCategories(data['taxonomy']);\n  }\n\n  \n   //added Jun 28\n   function getDistance(coord1, coord2) {\n    let x = coord1[0] - coord2[0]\n    let y = coord1[1] - coord2[1]\n    return Math.sqrt(x*x + y*y)\n  }\n  \n  //added Jun 28\n  function getClosestRegion(clickedCoordinates, MAPS) {\n    let closestRegionId = null;\n    let minDistance = Infinity;\n  \n    Object.keys(MAPS).forEach(mapId => {\n      const distance = getDistance(clickedCoordinates, MAPS[mapId].center);\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestRegionId = mapId;\n      }\n    });\n    // console.log(\"closest id: \")\n    // console.log(closestRegionId)\n    return closestRegionId;\n  }\n  \n  function convert_name_url(mapID){\n    if (mapID == \"chicago\")\n      return \"chicago\"\n    else if (mapID == \"des-moines\")\n      return \"des-moines\"\n    else if (mapID == \"indianapolis\")\n      return \"indianpolis\"\n    else if (mapID == \"kansas-city\")\n      return \"kansas-city\"\n    else if (mapID == \"madison\")\n      return \"madison\"\n    else if (mapID == \"milwaukee\")\n      return \"milwaukee\"\n    else if (mapID == \"msp\")\n      return \"minneapolisst-paul\"\n    else if (mapID == \"pittsburgh\")\n      return \"pittsburgh\"\n    else if (mapID == \"silicon-valley\")\n      return \"silicon-valley\"\n    else if (mapID == \"st-louis\")\n      return \"st-louis\"\n    else if (mapID == \"denmark\")\n      return \"denmark\"\n    else if (mapID == \"kenya\")\n      return \"kenya\"\n    else if (mapID == \"rwanda\")\n      return \"rwanda\"\n    else if (mapID == \"netherlands\")\n      return \"the-netherlands\"\n    else if (mapID == \"philippines\")\n      return \"the-philippines\"\n  }\n  //added Jun 28\n  function initMap() {\n    // creates the map\n    let map = new mapboxgl.Map({\n      container: \"map-container\",\n      style: 'mapbox://styles/mapbox/dark-v10',\n      attributionControl: false,\n      center: MAPS[selectedMapId].center,\n      zoom: MAPS[selectedMapId].flyToZoom || 6,\n      minZoom: 2,\n    });\n    let mapData = fetchMapData(selectedMapId);\n    mapData.then(setUpMap);\n\n    map.on('load', () => {\n      map.addControl(new mapboxgl.FullscreenControl(), 'bottom-right');\n      map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');\n      populateMapData(map, selectedMapId, mapData);\n    });\n\n    map.on('load', () => {\n      // Add an image to use as a custom marker\n      map.loadImage(\n      'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',\n      (error, image) => {\n      if (error) throw error;\n      map.addImage('custom-marker', image);\n      // Add a GeoJSON source with 2 points\n      map.addSource('points', {\n        'type': 'geojson',\n        'data': {\n          'type': 'FeatureCollection',\n          'features': [\n            {\n              // feature for Mapbox DC\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-122.21, 37.65]\n              },\n              'properties': {\n              'title': 'Silicon Valley'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-88.5, 41.1]\n              },\n              'properties': {\n              'title': 'Chicago'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-93.2, 44.9]\n              },\n              'properties': {\n              'title': 'Minneapolis/St. Paul'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-87.9, 43.0]\n              },\n              'properties': {\n              'title': 'Milwaukee'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-86.15, 39.8]\n              },\n              'properties': {\n              'title': 'Indianapolis'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-89.39, 43.07]\n              },\n              'properties': {\n              'title': 'Madison'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-90.2, 38.63]\n              },\n              'properties': {\n              'title': 'St. Louis'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-93.6, 41.6]\n              },\n              'properties': {\n              'title': 'Des Moines'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-94.6, 39.1]\n              },\n              'properties': {\n              'title': 'Kansas City'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [-80.0, 40.4]\n              },\n              'properties': {\n              'title': 'Pittsburgh'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [121, 14.58]\n              },\n              'properties': {\n              'title': 'Philippines'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [10.5, 56.3]\n              },\n              'properties': {\n              'title': 'Denmark'\n              }\n            },\n            {\n              // feature for Mapbox SF\n              'type': 'Feature',\n              'geometry': {\n                'type': 'Point',\n                'coordinates': [36, 0]\n              },\n              'properties': {\n              'title': 'Kenya'\n              }\n            }\n\n          ]\n        }\n      });\n       \n      // Add a symbol layer\n      map.addLayer(\n      {\n        'id': 'points',\n        'type': 'symbol',\n        'source': 'points',\n        'layout': \n        {\n          'icon-image': 'custom-marker',\n          // get the title name from the source's \"title\" property\n          'text-field': ['get', 'title'],\n          'text-font': [\n          'Open Sans Semibold',\n          'Arial Unicode MS Bold'\n          ],\n          'text-offset': [0, 1.25],\n          'text-anchor': 'top',\n          'icon-size': 0.7, // Adjust the size of the icon\n          'icon-allow-overlap': true, // Allow icons to overlap\n          'icon-ignore-placement': true \n        },\n        'paint': {\n          'text-color': '#ffffff' // Color set to white\n      }\n      });\n      }\n      );\n      });\n    //added June 28\n\n    setThisMap(map);\n    //map.on('click', mapClickHandlerRef.current);\n  }\n  const mapClickHandlerRef = useRef(null);\n\n  useEffect(() => {\n    if (!thisMap) {\n      initMap();\n    }\n  \n    if (thisMap) {\n      function handleMapClick(e) {\n        // Get clicked point's coordinates\n        const clickedCoordinates = [e.lngLat.lng, e.lngLat.lat];\n  \n        // You need a function 'getClosestRegion' that would return the ID of the closest region to the clicked point\n        const closestRegionId = getClosestRegion(clickedCoordinates, MAPS);\n        let name = convert_name_url(closestRegionId)\n        window.open(`http://www.energysociety.org/ecosystem-${name}`, '_blank');\n        // Call 'handleSelectMap' with the obtained region ID\n        handleSelectMap(closestRegionId);\n      }\n      // Remove previous click event listener\n      if (mapClickHandlerRef.current) {\n        thisMap.off('click', mapClickHandlerRef.current);\n      }\n      // Attach click event\n      thisMap.on('click', handleMapClick);\n      // Update the ref after defining the function\n      mapClickHandlerRef.current = handleMapClick;\n      if (thisMap.getLayer(POINT_LAYER)) {\n        var filters = [\"any\"];\n        // If ANY of the 3 taxonomies for a company are selected, it should be\n        // displayed on the map.\n        [1, 2, 3].forEach(i => {\n          var filter = [\"in\", `tax${i}sanitized`];\n          selectedCategories.forEach(category => filter.push(category));\n          filters.push(filter);\n        });\n        thisMap.setFilter(POINT_LAYER, filters);\n      }\n    }\n  }, [thisMap, selectedCategories]); // The dependencies array\n  \n\n\n  useUrlFragment(selectedMapId, urlFragment => {\n    if (MAPS.hasOwnProperty(urlFragment)) {\n      handleSelectMap(urlFragment);\n    }\n  });\n\nreturn (\n  <ThemeProvider theme={THEME}>\n    <div className={classes.root}>\n      <SettingsPane\n        selectedMapId={selectedMapId}\n        mobileDrawerOpen={mobileDrawerOpen}\n        selectedCategories={selectedCategories}\n        onToggleOpen={setMobileDrawerOpen}\n        onSelectMap={handleSelectMap}\n        taxonomy={taxonomy}\n        onSelectAllCategories={() => handleSelectAllCategories(taxonomy)}\n        onDeselectAllCategories={handleDeselectAllCategories}\n        onToggleCategory={handleToggleCategory} />\n      <main className={classes.mainContent}>\n        <div id=\"map-container\" className={classes.mapContainer} />\n          <LogoOverlay selectedMapId={selectedMapId} />\n          <div className={classes.resetViewButton} >\n            <IconButton variant=\"contained\" color=\"white\" className={classes.resetViewButton} aria-label=\"reset view\" onClick={() => { handleReset() }} >\n              <Home />\n            </IconButton>\n          </div>\n        <div className={classes.mapOverlay}>\n          <div className={classes.mapOverlayInner}>\n            <div className={handleShift()}>\n              <div className={classes.titleAndSearch}>\n                <div className={classes.mapTitle}>\n                  <Typography variant=\"h1\">{MAPS[selectedMapId].title}</Typography>\n                </div>\n                <Omnibox\n                  companies={companiesGeojson.features}\n                  onSelectCompany={handleSelectCompany}\n                  onOpenMobileDrawer={() => setMobileDrawerOpen(true)} />\n              </div>\n              \n            </div>\n            <LogoOverlay selectedMapId={selectedMapId} />\n          </div>\n        </div>\n      </main>\n    </div>\n  </ThemeProvider>\n); }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}